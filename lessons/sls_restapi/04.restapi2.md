## Connpass イベント一覧 API の作成

では実際に 簡単なアプリケーションとして、
イベント情報サイトの Connpass からイベント一覧のデータを取得する REST API を作成してみましょう。

REST API 内で、別のサービスのREST API を利用する場合、 axios などの node modules を利用する必要があるため、
Serverless で 様々な node modules を利用する方法を確認しておきましょう。

https://connpass.com/about/api/

## イベント一覧API の作成

Serverless Framework では、 npm を利用した node modules の利用にも対応しています。
プロジェクトルートで以下のコマンドを実行することで、axios のインストールが可能です。

```bash
$ npm i axios
```

Connpass 上のイベント一覧の API を `GET /events` の形式で作成するには、まず `serverless.yml` の `functions` に以下のように記述を追加します。

`src/connpass.js`

```
import axios from "axios"

export const events = async event => {
    const url = "https://connpass.com/api/v1/event/"
    const params = {
        series_id: 1712
    }
    const results = await axios.get(url,params)
    return {
        statusCode: 200,
        body: JSON.stringify(
            {
                events: results.data
            }
        ),
    };
};
```

上記の例では、 series_id `1712` とすることで、 Lec Cafe のイベント一覧を表示していますが、
その他のコミュニティの ID を指定して、任意のコミュニティのイベント一覧APIを作成することも可能です。


`serverless.yml`

```yaml
functions:
  connpassEvent:
    handler: src/connpass.events
    events:
      - http:
          path: /connpass/events
          method: get

```

