## GitHub Actions - CD 環境の構築

Serverless Framework を用いたアプリケーション開発では、
コマンドを利用して AWS 環境上にプログラムをデプロイします。

ローカル環境から主導でプログラムをデプロイするのは、
非常に面倒である上、デプロイされているソースコードがどの時点のものか後からわかりずらいという問題もあります。

運用をスムーズにするためにもServerless Framework のデプロイは、
GitHub などのソースコードと連携して自動でデプロイされるように整備する方が良いでしょう。

GitHub の提供する GitHub Actions の機能を利用すれば、
GitHub へのソースコードをトリガーとして、自動で Serverless Framework のデプロイを実行できるようになり、
手動でのデプロイ処理を行う必要がなくなります。

サンプルのコードを GitHub 上に Up して、GitHub Actions を利用した

## GitHub Actions の利用

GitHub Actions を利用するためには、 GitHub 上にプロジェクトのソースコードを Up する必要があります。

まだ手元でのみソースコードを管理している人は、一旦 GitHub 上にソースコードをUpして準備を整えておきましょう。



````

```
name: Deploy Staging

on:
  push:
    branches:
      - master
      
jobs:
  deploy_staging:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - name: deploy serverless
        env: # Or as an environment variable
          AWS_ACCESS_KEY_ID: ${{ secrets.STG_AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.STG_AWS_SECRET_ACCESS_KEY }}
        run: |
          npm i
          npm run deploy -- --stage staging

```

## Pull Request に対応した Serverless 環境の用意

