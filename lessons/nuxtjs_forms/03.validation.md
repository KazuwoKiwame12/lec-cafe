## vuelidate のセットアップ

フォームの要素が用意できたところで、
実際にバリデーションの実装を行っていきましょう。

Vue.js では様々なバリデーションライブラリが公開されていますが、
ここでは `Vuelidate` を利用した バリデーション実装を行っていきます。

https://vuelidate.js.org/

::: tip
Vue.js のバリデーションでは [VeeValidate](https://logaretm.github.io/vee-validate/) と呼ばれるライブラリも人気です。
VeeValidateでは、バリデーションのルール等を HTML 要素に記述していくのに対し、
Vuelidate では、 JS のコードとしてバリデーションの定義を記述することが出来ます。
:::


vuelidate を利用するためには、まず npm で vuelidate のインストールを行います。

```bash
$ npm install vuelidate --save
```

次に `plugins/vuelidate.js` を以下のような形で作成します。

```js
import Vue from 'vue'
import Vuelidate from 'vuelidate'
Vue.use(Vuelidate)
```

作成したプラグインファイルを `nuxt.config.js` で以下のようにして読み込めば準備は完了です。

```js
export default {
  // ...
  /*
  ** Plugins to load before mounting the App
  */
  plugins: [
    "~/plugins/vuelidate.js"
  ],
  //...
}
```

## バリデーションの実装

vuelidate のセットアップが

```vue
<template>
  <div>
    <h1 class="title">
      お問い合わせ
    </h1>
    <form>
      <div class="form-group">
        <label>性別</label>
        <div>
          <label class="form-check form-check-inline">
            <input class="form-check-input" type="radio" value="male" v-model="$v.form.gender.$model">
            男性
          </label>
          <label class="form-check form-check-inline">
            <input class="form-check-input" type="radio" value="female" v-model="$v.form.gender.$model">
            女性
          </label>
        </div>
      </div>
      <div class="form-group">
        <label>件名</label>
        <input type="text" class="form-control" aria-label="件名" v-model="$v.form.title.$model">
      </div>
      <div class="form-group">
        <label>部署</label>
        <select class="form-control" aria-label="部署" v-model="$v.form.subject.$model">
          <option :value="null">選択してください</option>
          <option value="somu">総務部</option>
          <option value="sales">営業部</option>
          <option value="hanbai">販売部</option>
        </select>
      </div>
      <div class="form-group">
        <label>本文</label>
        <textarea type="text" class="form-control" rows="5" aria-label="本文" v-model="$v.form.body.$model"/>
      </div>
      <label class="form-group form-check">
        <input type="checkbox" class="form-check-input" v-model="$v.form.check.$model">
        個人情報の取扱に同意します。
      </label>
      <button type="submit" class="btn btn-primary" @click.prevent="submit">送信</button>
    </form>
  </div>
</template>

<script>
import {required} from "vuelidate/lib/validators"

export default {
  data(){
    return {
      form: {
        title: "",
        body: "",
        gender: null,
        subject: null,
        check: false
      }
    }
  },
  methods:{
    submit(){
      if(this.$v.$invalid){
        console.log("バリデーションエラー")
      }else{
        console.log(this.form)
      }
    }
  },
  validations: {
    form: {
      title: {required},
      body: {required},
      gender: {},
      subject: {},
      check: {}
    }
  }
}
</script>

<style>

</style>

```
