# レスポンシブデザイン

異なるデバイス上でコンテンツのレイアウトを柔軟に変化させるデザインの手法をレスポンシブデザインといいます。

スマートフォンが完全に普及し、インターネットの閲覧デバイスとしての地位を確かにした今、
Webサイトを多様なデバイスに対応させることのニーズは非常に高くなっています。

一言にレスポンシブと言っても、考慮すべきポイントは様々です。
マルチデバイス対応の肝となるレスポンシブの考え方とテクニックを確認していきましょう。

## マルチデバイスのデザイン

PCの画面（以下PC) とスマートフォンなどの小さい画面（以下SP) など異なるデバイス上でのデザインを考える上で、
単純な画面サイズの違い以外にも様々な問題を考慮しなければなりません。

レスポンシブの手法を考える前に、
マルチデバイスでのデザインを考慮する上で重要な点を考えてみましょう。

### スマートフォンの画面サイズへの適合

マルチデバイスを考える上で画面サイズの違いは大きな問題です。

一般的に、スマートフォンは、PCよりも小さな画面サイズとなっており、
PCで横並びに表示していたコンテンツが、 スマートフォンでは縦並びに調整しなければならない、
と言った問題は多々発生します。

デザインを考える上では、横のサイズだけでなく、縦のサイズも考慮しなければならないため、
単純にPCのコンテンツをSP向けに縦並びに調整するだけでは、
SPの画面コンテンツはダラダラと長い印象を持つようになるでしょう。

コンテンツの長さを適切な長さに納めるためには、
SPでの表示を考慮しながら画面の小さいサイズをベースにコンテンツ量の切り分けを考える必要があるでしょう。

### 大きな画面サイズへの適合

小さな画面サイズだけでなく大きな画面サイズへの適合も重要な問題です。

最近ではPCでも画面幅100％ でコンテンツを表示するWebサイトが増えてきていますが、
無限に幅100% でコンテンツを展開し続けるのは非常に困難です。

最近では4Kのディスプレイが登場したり、 Macでも3K程度の解像度で画面を出力することが可能になってきているため、
FullHD相当のブラウザではきれいに表示できていても、大きな解像度のモニタで全画面表示するとサイトデザインが崩れる…といったケースも出てくるかもしれません。

増え続ける解像度に無限に対応するのは困難ですので、適切なコンテナでコンテンツの表示領域を制限し、
幅100％ で展開するのは、背景色やボーダーなどのデザイン要素のみに絞る方が良いでしょう。

### 異なるUIへの対応

複数の画面サイズに対応する上で、異なるデバイスのUI上の都合も考慮する必要があるでしょう。

スマートフォンやタブレットなどのタッチデバイスは、
Webブラウザ上のホバーの機能が乏しく、
またドラッグを用いたつかみの操作や、水平方向のフリックがやりづらいという課題があります。

クリック領域についてもSPにおけるデザインの場合は押しやすさが重要です。
ポインタで操作するPCと違って、
タッチデバイスでは指のサイズを考慮した大きなボタンでクリック可能コンテンツを表現しなければなりません。

逆に傾き検出やカメラアップロードなどスマートフォン等固有のUIもありますので、
デバイスごとにUIが異なることを念頭に置きながら、適材適所のUIを構築する必要があります。

### 異なる利用場面への対応

デバイスが異なればWebサイト閲覧のシーンも変わってきます。

PCでWebサイトを閲覧するケースに比べて、
SPでWebサイトを閲覧するケースでは、ユーザの集中力が低い、という事は比較的ありえるでしょう。
サイトの流入経路に関しても、ソーシャル関係のシェア流入は比較的スマートフォンなどモバイル端末からの方が多い化もしれません。

逆にPCでのWebサイト閲覧状況を考慮した場合、
求めてい情報を獲得するための高度なUI 
協力な入力UIを利用した操作系が求められていたり、入力などの操作がやりやすい

## コンテナ

コンテナは、Webサイトを構築する上で重要な要素です。
コンテナは、画面の水平レベルでの制御範囲を定義する役割を持ちます。

コンテナは画面内のコンテンツの収まる範囲を設定するブロックで、
コンテンツを一定の範囲内で整列させる役割を持ちます。

### PC画面でのコンテナ

一般的にPC向けのサイトデザインでは、700 - 1500 px程度の幅のコンテナを設定します。

![](/images/sec1/container.png)

PC画面のコンテナサイズは画面幅よりも小さく設定されることがほとんどです。
コンテナの設定を行わず、画面幅全体に対して要素を配置する場合、例えば4Kなどの大きな画面で閲覧した際に、
テキストの折返しがほとんど起こらなくなり、無駄に細長く展開されるテキストのラインがデザイン上の美観を損ねたり、
画面サイズの変化によるテキスト折り返し量の違いでテキスト表現の高さが不安定になる、といった問題があります。

### SP画面でのコンテナ

SP画面でのコンテナは、画面のサイズに対して100％ の幅が取られるケースがほとんどです。

SP画面でのコンテナは、コンテナサイズ = 画面幅とすることで、
画面上の横スクロールを防ぐといった役割があります。

画面100％ でコンテナを設定する都合上、コンテンツ表示領域の幅は柔軟に変化します。
横並びの要素などは、SPの標示範囲内で適切に表示されるよう工夫を施す必要があります。

またコンテナが画面幅100％ と言っても、画面縁ギリギリまで要素を配置したいケースは少ないでしょう。
画面の左右に適切な余白を設定したい場合、コンテナの左右に適切なパディングを設けて非表示領域を設定しましょう。

### コンテナとコーディング

コンテナをCSSで表現する場合、以下のようなコードになります。

```css
.container{
    width: 100%;
    max-width: 784px;
    margin-right: auto;
    margin-left: auto;
}
```

これを使ってHTMLを記述する場合、以下のような形になるでしょう。

```html
<div class="container">
    <section class="header"> ... </section>
    <section class="hero"> ... </section>
    <section class="about"> ... </section>
    <section class="service-list"> ... </section>
    <section class="contact"> ... </section>
    <section class="footer"> ... </section>
</div>
```

全ての要素をコンテナ要素の内部に配置するコーディングはシンプルでわかりやすい反面、
コンテナの外部に何も装飾を施せないという欠点があります。

通常、コンテナの外部にはコンテンツを配置しませんが、
背景色や罫線などはコンテナを突き抜けて、画面全体に展開したいケースもあるでしょう。
(上記コンテナイメージ画像のファーストビュー箇所など参考）

```html
<section class="header">
    <div class="container"> ... </div>
</section>
<section class="hero">
    <div class="container"> ... </div>
</section>
<section class="about">
    <div class="container"> ... </div>
</section>
<section class="service-list">
    <div class="container"> ... </div>
</section>
<section class="contact">
    <div class="container"> ... </div>
</section>
<section class="footer">
    <div class="container"> ... </div>
</section>
```

上記のようにそれぞれのセクションごとが内部にコンテナを含むようにすれば、
コンテナ外への装飾も簡単に適用することができるようになります。

## レスポンシブデザイン

以上の考慮を踏まえて、マルチデバイスに柔軟に対応するためのデザインの手法をレスポンシブデザインと言います。

一般的にレスポンシブデザインでは、 
画面幅に対して柔軟にレイアウトを変化させることで、
マルチデバイス上でのレイアウト変更を実現しています。

このようなレイアウト変更をするための仕組みとして、
画面幅に応じて異なるCSSプロパティを適用させる
メディアクエリと呼ばれる仕組みが用意されています。

マルチデバイスをサポートしているとしても、
PCとSPで別々のURLが用意されていたり、
ブラウザのUser Agent (UA) を判別して異なるHTMLをサーバから返信するといったような手法は、
レスポンシブデザインとは違ったアプローチとなります。

### モバイルファーストの考え方

モバイルファーストとは、「モバイル向けの画面を最重視する」という意味合いの考え方です。

前述の通り、コンテンツの表示量を考えた際にPC優先で考え始めると、
どうしてもモバイル側にレイアウトを変換した際に、表示量が溢れてメリハリのないサイト構成になってしまいがちです。

「モバイルでの見え方」さらには「モバイルでのユーザ体験」を重視してデザインを考えることで、
レスポンシブ対応に関するコストは大きく削減できる筈です。

### ブレークポイント

マルチデバイスを考える上で、レイアウトの分岐点となるポイントをブレークポイントといいます。

デザインの中で要素ごとにブレークポイントを考えるのは、コーディング管理が非常に煩雑になるため、
サイト全体でブレイクポイントの種類を予め決めておく方が良いでしょう。

一般的にサイトで1つのブレークポイントを設定する際には、
スマートフォンとタブレットの一般的な分岐点である `768px`  がブレークポイントとして用いられることが多いようです。

この場合、SP向けの `320-768px` の画面幅では、画面幅に比例した `%` ベースのコーディングを行います。
コンテナサイズも `width: 100%` として画面サイズに応じて柔軟に変化するコンテナを採用します。

`768px` 以上の画面では `768px` のコンテナサイズでコンテンツ表示幅を制限してサイトをデザインします。

`768px` のコンテナが小さすぎる場合、2つめ、3つめのコンテナサイズを設定してブレークポイントに追加すると良いでしょう。

![](/images/sec2/File.jpg)

> image from [http://responsive-jp.com](http://responsive-jp.com)

### レスポンシブしない選択肢

全てのWebデザインやUIがレスポンシブと相性が良いというわけではありません。

例えばGmailやGitHubなどでは、PCとSPで全く異なるデザインを適用しています。
PC向けサイトのコンテンツ量が多い場合や、 UIが複雑な場合などは、
あえてレスポンシブデザインを適用せずに、別々のサイトを用意するケースも考えられます。

また最近ちらほら目にするようになりましたが、
スマホからの利用がほとんどのWebサイトに置いては、
横640px程度のWebサイトのみ作成して、PC向けの最適化を行わないという選択肢も考えられます。

ユーザからの確実なシェアを狙いたい場合など確実にモバイル端末でアクセスしてほしい場合には、
PC向けのサイトではコンテンツを何も表示せず、 SP閲覧用のQRコードのみ表示する、といったケースも考えられます。

## メディアクエリの書き方

CSSでレスポンシブデザインを実現するには、
メディアクエリを利用して画面幅ごとに異なるCSSを記述する方法が一般的です。

PCをベースにしたメディアクエリの書き方は以下のようになります。

```css
p { font-size: 16px; }
 
@media screen and (max-width:768px) { 
	p { font-size: 14px; }
}
 
@media screen and (max-width:480px) { 
	p { font-size: 12px; }
}
```

PCをベースにするためPC向けのCSSを記述した上で、
メディアクエリ内で、 SP向けのCSS定義を記述していきます。

指定したサイズ以下の画面幅に対してメディアクエリの内容を適用するため、`max-width` の条件式を利用しています。

逆にSPをベースにする場合、以下のようなCSSが出来上がるでしょう。

```css
p { font-size: 12px; }
 
@media screen and (min-width:768px) { 
	p { font-size: 14px; }
}
 
@media screen and (min-width:1024px) { 
	p { font-size: 16px; }
}
```

こちらは、SPをベースにするためSP向けのCSSを記述した上で、
メディアクエリ内で、 PC向けのCSS定義を記述していきます。

指定したサイズ以上の画面幅に対してメディアクエリの内容を適用するため、`min-width` の条件式を利用しています。

メディアクエリが無くてもmax-widthやmin-widthの記述を利用して簡易的にレスポンシブデザインを実現することも可能です。

### スマートフォン向けのCSS

コンテナ幅 = 画面幅となるスマートフォン向けのCSSでは、
横幅を `%` を用いてコーディングするなどして、コンテナから要素が溢れないように注意する必要があります。

複数の画面幅で適切にコンテンツを表示できるよう注意が必要ですが、
iphone5やiPhone SE、古いAndroidなどをターゲットデバイスに含める場合は、
`320px` での表示確認を必ず行う必要があります。

テキストコンテンツなどは、画面幅のサイズに応じて折り返し量が大きく異なるため、
各画面幅での表示量の違いに十分注意する必要があります。

### PC向けのCSS 

コンテンツは基本、固定幅のコンテンツ内部に収めて、
画面幅の変化に影響されないレイアウトの構築が望ましいです。

コンテナから外れて、画面幅全体に対してデザインを適用する場合、
大画面にも対応するために4k等での表示確認を念の為行うのが良いでしょう（Chromeの検証ツール）

### メディアクエリのまとめ方

CSS全体でどのようなメディアクエリを記述するかの方針は予め決めておく必要があります。

通常のCSSとメディアクエリでのCSSを分離する書き方を採用する場合、
以下のようなCSSの書き方になります。

```css
.title { font-size: 12px; }
.body { font-size: 10px; }
 
@media screen and (min-width:768px) { 
	.title { font-size: 14px; }
    .body { font-size: 12px; }
} 
```

メディアクエリの記述が1回で済むため、ブレークポイントの管理は簡単になります。

PC版のコーディングを一旦完成させてから、
別の担当者がメディアクエリでSP版をコーディングしていく際などには便利な書き方かもしれませんが、
1つのコンポーネントに対して、CSSの記述が乱立するためサイト全体の管理としては都合が悪いケースもあるでしょう。

要素ごとにまとめてメディアクエリを記述する場合、以下のように複数回のメディアクエリの記述が発生します。

```css
.title { font-size: 12px; }
@media screen and (min-width:768px) { 
	.title { font-size: 14px; }
}

.body { font-size: 10px; }
@media screen and (min-width:768px) { 
    .body { font-size: 12px; }
}
```

要素ごとにCSSを探す場合こちらのCSS記述のほうが目的のCSSに到達しやすく改修の手間も少ないですが、
何回もメディアクエリを記述する手間や、様々な箇所で記述されているメディアクエリを管理するコストは大きくなります。

SCSSを利用する場合はmixinを利用して簡単にこれを記述することができます。

```scss
@mixin desktop() {
  @media (min-width: 768px) {
    @content;
  }
}
```

```scss
.title { 
  font-size: 12px; 
  @include desktop{
    font-size: 14px;  
  }
}
.body { 
  font-size: 10px; 
  @include desktop{
    font-size: 12px;  
  }
}
```

mixinを使うのが複雑な場合、 最低限 `768px` などのブレークポイントだけは変数化して共通化できるようにしておきましょう。

### Flexboxを利用してレスポンシブする

PC版では横並びに表示するコンテンツをSP版では縦に表示する、
と言ったよくあるレスポンシブのパターンは、
flexboxを使って簡単に表現する事ができます。

flexboxを利用したレスポンシブの場合、 メディアクエリで `flex-wrap` の値を調整するだけで
PC版では一列に横並び、 SP版では縦に並べる、といった表現が可能です。

<p data-height="265" data-theme-id="0" data-slug-hash="BvQqwZ" data-default-tab="css,result" data-user="mikakane" data-pen-title="BvQqwZ" class="codepen">See the Pen <a href="https://codepen.io/mikakane/pen/BvQqwZ/">BvQqwZ</a> by mikakane (<a href="https://codepen.io/mikakane">@mikakane</a>) on <a href="https://codepen.io">CodePen</a>.</p>

折り返しつつ（`flex-wrap: wrap`) 3列表示…といったPC向けデザインのケースでは、
`width` や `flex-basis` をメディアクエリで調整することができます。

